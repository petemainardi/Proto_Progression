using System;
using System.Linq;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using UniRx;
#pragma warning disable 0649    // Variable declared but never assigned to


// ================================================================================================
// ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
// ================================================================================================
/**
 *  Adjust a fillable image to reflect changes in a health value from a HealthTracker.
 */
// ================================================================================================
// ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
// ================================================================================================
public class HealthBar : MonoBehaviour
{
    // Fields =====================================================================================
    [SerializeField]
    private HealthTracker tracker;

    [SerializeField, Sirenix.OdinInspector.Required]
    private Image FillImage;
	// ============================================================================================

	// Mono =======================================================================================
	// ----------------------------------------------------------------------------------
	void Start ()
	{
        if (tracker == null)
            Debug.LogError($"{this.NameAndID()}'s HealthBar is missing a reference to a HealthTracker.");

        this.tracker.Health
            .Subscribe((int h) => this.FillImage.fillAmount = (float)h / (float)this.tracker.MaxHealth)
            .AddTo(this);
	}
	// ----------------------------------------------------------------------------------
	// ============================================================================================	
}
// ================================================================================================
// ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
// ================================================================================================
